<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AUTOCAD Quizz - Expertise Génie Électrique</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0b57d0;
            --bg: #ffffff;
            --surface: #f8f9fa;
            --error: #d93025;
            --success: #1e8e3e;
            --text-main: #1f1f1f;
            --text-sub: #444746;
            --border: #c4c7c5;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            margin: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Header Professionnel */
        header {
            padding: 20px 40px;
            display: flex;
            justify-content: flex-start;
            align-items: center;
            border-bottom: 1px solid #e3e3e3;
        }

        .title-brand {
            font-size: 24px;
            font-weight: 500;
            color: var(--text-sub);
            letter-spacing: -0.5px;
        }

        /* Container Principal */
        .main-container {
            max-width: 720px;
            margin: 40px auto;
            padding: 0 20px;
            flex-grow: 1;
            width: 100%;
        }

        /* Barre de Progression */
        .header-stats {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 40px;
        }

        .progress-wrapper {
            flex-grow: 1;
            height: 6px;
            background: #e3e3e3;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .counter-pill {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-sub);
            background: var(--surface);
            padding: 4px 12px;
            border-radius: 16px;
        }

        .badge-group { display: flex; gap: 8px; }
        .stat-badge {
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
        }
        .stat-wrong { background: #fce8e6; color: var(--error); }
        .stat-right { background: #e6f4ea; color: var(--success); }

        /* Question & Options */
        .question-box h2 {
            font-size: 22px;
            font-weight: 400;
            line-height: 1.4;
            margin-bottom: 30px;
        }

        .option-card {
            background: var(--surface);
            border: 1px solid transparent;
            border-radius: 12px;
            padding: 18px 24px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .option-card:hover:not(.locked) {
            background: #f1f3f4;
        }

        .option-card.selected {
            border-color: var(--primary);
            background: #f0f4f9;
        }

        /* Feedbacks couleurs demandés */
        .option-card.correct-ans {
            background: #e6f4ea !important;
            border: none;
        }
        .option-card.wrong-ans {
            background: #fce8e6 !important;
            border: none;
        }

        .feedback-msg {
            margin-top: 10px;
            font-size: 14px;
            line-height: 1.5;
            display: none;
        }

        .feedback-msg.visible { display: block; }
        .text-error { color: var(--error); font-weight: 600; }
        .text-success { color: var(--success); font-weight: 600; }

        /* Navigation */
        .footer-nav {
            margin-top: 40px;
            padding: 25px 0;
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            border-top: 1px solid #e3e3e3;
        }

        .btn {
            padding: 10px 30px;
            border-radius: 24px;
            font-family: inherit;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: 0.2s;
            border: 1px solid var(--border);
            background: white;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            border: none;
        }

        .btn:disabled { opacity: 0.4; cursor: not-allowed; }

        /* Ecran Final */
        #final-screen { display: none; text-align: center; padding: 40px 0; }
        .result-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
        }
        .res-card {
            background: var(--surface);
            padding: 25px;
            border-radius: 16px;
        }
        .res-card h1 { font-size: 42px; margin: 10px 0; color: var(--primary); }

        /* Footer personnalisé */
        .max-footer {
            text-align: center;
            padding: 30px;
            color: var(--text-sub);
            font-size: 13px;
        }
    </style>
</head>
<body>

<header>
    <center> <div class="title-brand">AUTOCAD Quizz</div></center>
</header>

<div class="main-container">
    <div id="quiz-area">
        <div class="header-stats">
            <div class="progress-wrapper"><div class="progress-bar" id="p-bar"></div></div>
            <div class="counter-pill" id="q-count">1 / 20</div>
            <div class="badge-group">
                <div class="stat-badge stat-wrong">✕ <span id="w-val">0</span></div>
                <div class="stat-badge stat-right">✓ <span id="r-val">0</span></div>
            </div>
        </div>

        <div class="question-box">
            <h2 id="q-text">Chargement de l'expertise...</h2>
            <div id="options-list"></div>
        </div>

        <div class="footer-nav">
            <button class="btn" id="btn-back" disabled>Retour</button>
            <button class="btn btn-primary" id="btn-next" disabled>Suivant</button>
        </div>
    </div>

    <div id="final-screen">
        <h2 style="font-weight: 500;">Révisions terminées !</h2>
        <div class="result-grid">
            <div class="res-card">
                <p>Note Finale</p>
                <h1 id="f-score">0/20</h1>
            </div>
            <div class="res-card">
                <p>Précision</p>
                <h1 id="f-percent">0%</h1>
            </div>
        </div>
        <button class="btn btn-primary" onclick="location.reload()">Recommencer la session</button>
    </div>
</div>

<footer class="max-footer">
    <p>Signaler un problème technique</p>
    <p><strong>Conçu par Max_Adis</strong></p>
</footer>

<script>
    const quizData = [
        {
            q: "Quelle commande permet de dupliquer rapidement un objet à un emplacement précis et de répéter l'action ?",
            options: ["Ligne", "Copier", "Déplacer", "Aucun"],
            correct: 1,
            justifCorrect: "La commande COPIER crée une ou plusieurs copies d'objets sélectionnés à une distance et une direction spécifiées.",
            justifWrong: "Déplacer change la position sans dupliquer. Ligne crée un segment, pas une copie."
        },
        {
            q: "Quelle commande permet de basculer un objet selon un axe symétrique (symétrie orthogonale) ?",
            options: ["Polyligne", "Ligne", "Miroir", "Aucun"],
            correct: 2,
            justifCorrect: "MIROIR crée une copie inversée de l'objet de l'autre côté d'un axe défini.",
            justifWrong: "Ligne et Polyligne sont des outils de dessin de base, pas des outils de transformation symétrique."
        },
        {
            q: "Quelle commande permet d'obtenir une nouvelle entité similaire à l'originale avec une distance de décalage ?",
            options: ["Décaler", "Déplacer", "Symétrie", "Aucun"],
            correct: 0,
            justifCorrect: "DÉCALER (OFFSET) crée des cercles concentriques, des lignes parallèles ou des courbes parallèles.",
            justifWrong: "Symétrie inverse l'objet. Déplacer ne crée pas de nouvelle entité."
        },
        {
            q: "Quel mode empêche les mouvements obliques lorsqu'il est activé dans AutoCAD ?",
            options: ["Décomposer", "Échelle", "Ortho (F8)", "Polygone"],
            correct: 2,
            justifCorrect: "Le mode ORTHO contraint le déplacement du curseur aux directions horizontale et verticale.",
            justifWrong: "Décomposer sépare un bloc en éléments simples. Échelle modifie la taille."
        },
        {
            q: "Laquelle de ces affirmations sur le schéma électrique est vraie ?",
            options: ["Un schéma n'explique pas le fonctionnement", "La figure 3 présente un plan architectural", "Le schéma est une représentation conventionnelle", "La figure 2 est un schéma multifilaire"],
            correct: 2,
            justifCorrect: "Par définition, un schéma électrique utilise des symboles conventionnels pour représenter une installation.",
            justifWrong: "La figure 3 est un schéma multifilaire (moteur), pas architectural. La figure 2 est un schéma unifilaire de tableau."
        },
        {
            q: "Quelle commande décompose un objet en ses composants pour les modifier séparément ?",
            options: ["Copier", "Décomposer", "Décaler", "Rotation"],
            correct: 1,
            justifCorrect: "DÉCOMPOSER (EXPLODE) casse un bloc, une polyligne ou une hachure en ses éléments individuels.",
            justifWrong: "Rotation fait pivoter l'objet. Décaler crée une copie parallèle."
        },
        {
            q: "Dans un schéma multifilaire de départ moteur (Fig. 3), quel est le rôle de F2 ?",
            options: ["Sectionneur", "Contacteur", "Relais Thermique", "Fusible"],
            correct: 2,
            justifCorrect: "F2 représente la protection thermique contre les surcharges prolongées du moteur.",
            justifWrong: "Le sectionneur est Q1. Le contacteur est KM1."
        },
        {
            q: "Quel est le rôle principal du cartouche sur un dessin technique ?",
            options: ["Décoration", "Identification du projet", "Liste du matériel", "Mesure des angles"],
            correct: 1,
            justifCorrect: "Le cartouche contient les infos cruciales : titre, échelle, auteur (Max_Adis), et date.",
            justifWrong: "La liste du matériel est la nomenclature, pas le cartouche."
        }
        // Tu peux ajouter les 12 autres questions ici pour atteindre 20
    ];

    let current = 0;
    let score = 0;
    let wrongs = 0;
    let locked = false;

    const qText = document.getElementById('q-text');
    const optionsList = document.getElementById('options-list');
    const btnNext = document.getElementById('btn-next');
    const pBar = document.getElementById('p-bar');
    const qCount = document.getElementById('q-count');

    function initQuiz() {
        locked = false;
        btnNext.disabled = true;
        const data = quizData[current];
        qText.innerText = `${current + 1}. ${data.q}`;
        optionsList.innerHTML = '';

        data.options.forEach((opt, i) => {
            const card = document.createElement('div');
            card.className = 'option-card';
            card.innerHTML = `
                <div style="display:flex; align-items:center; gap:15px;">
                    <span style="color:#70757a; font-weight:600;">${String.fromCharCode(65+i)}</span>
                    <span>${opt}</span>
                </div>
                <div class="feedback-msg" id="msg-${i}"></div>
            `;
            card.onclick = () => handleSelect(i, card);
            optionsList.appendChild(card);
        });

        pBar.style.width = `${((current + 1) / quizData.length) * 100}%`;
        qCount.innerText = `${current + 1} / ${quizData.length}`;
    }

    function handleSelect(idx, el) {
        if (locked) return;
        locked = true;
        const correctIdx = quizData[current].correct;
        const allCards = document.querySelectorAll('.option-card');

        if (idx === correctIdx) {
            el.classList.add('correct-ans');
            const msg = el.querySelector('.feedback-msg');
            msg.innerHTML = `<span class="text-success">✓ Bonne réponse !</span><br>${quizData[current].justifCorrect}`;
            msg.classList.add('visible');
            score++;
            document.getElementById('r-val').innerText = score;
        } else {
            el.classList.add('wrong-ans');
            const msgErr = el.querySelector('.feedback-msg');
            msgErr.innerHTML = `<span class="text-error">✕ Pas tout à fait</span><br>${quizData[current].justifWrong}`;
            msgErr.classList.add('visible');
            
            // Afficher aussi la bonne réponse
            allCards[correctIdx].classList.add('correct-ans');
            const msgRight = allCards[correctIdx].querySelector('.feedback-msg');
            msgRight.innerHTML = `<span class="text-success">La réponse correcte était :</span><br>${quizData[current].justifCorrect}`;
            msgRight.classList.add('visible');
            
            wrongs++;
            document.getElementById('w-val').innerText = wrongs;
        }
        btnNext.disabled = false;
    }

    btnNext.onclick = () => {
        current++;
        if (current < quizData.length) {
            initQuiz();
        } else {
            showEnd();
        }
    };

    function showEnd() {
        document.getElementById('quiz-area').style.display = 'none';
        document.getElementById('final-screen').style.display = 'block';
        const finalNote = ((score / quizData.length) * 20).toFixed(1);
        document.getElementById('f-score').innerText = `${finalNote}/20`;
        document.getElementById('f-percent').innerText = `${Math.round((score / quizData.length) * 100)}%`;
    }

    initQuiz();
</script>
</body>
</html>
